"use strict";!function(d){d("#js__jupiterx-cp-wrap");var r=!1;window.onbeforeunload=function(t){var e;if(t=t||window.event,0<r)return t.returnValue=e};var t=function(){d('[data-toggle="tooltip"]').tooltip(),d('[data-toggle="popover"]').click(function(t){t.preventDefault()}),d('[data-toggle="popover"]').popover({trigger:"hover"})};e(),o(),t(),d(window).on("control_panel_pane_loaded",o),d(window).on("control_panel_pane_loaded",e),d(window).on("control_panel_pane_loaded",t);var n={trigger_pane:function(t){t.preventDefault();var e=d(this).attr("href"),a=(window.location.hash=e).substring(1,e.length);n.get_pane(e,a)},get_pane:function(e,t){var a=d("#js__jupiterx-cp-panes");a.addClass("loading-pane");var n={action:"jupiterx_cp_load_pane_action",slug:t};d.post(ajaxurl,n,function(t){a.empty(),a.append(t.data),a.removeClass("loading-pane"),d(".jupiterx-cp-sidebar-list-items").removeClass("jupiterx-is-active"),d("[href="+e+"]").parent().addClass("jupiterx-is-active"),d(window).trigger("control_panel_pane_loaded")})},get_pane_on_load:function(){var t=window.location.hash;if(0<t.length){var e=t.substring(1,t.length);n.get_pane(t,e)}},call_to_register:function(){0<d(".jupiterx-call-to-register-product").length&&(window.location=window.location.href.split("#")[0])}};function i(){d("#js__jupiterx-cp-wrap:not(.jupiterx-call-to-register-product) .js__cp-sidebar-link").off().on("click",n.trigger_pane)}function e(){d(".jupiterx-setup-wizard-hide-notice").on("click",function(t){t.preventDefault(),d(this).attr("disabled","disabled"),d.ajax({type:"POST",url:ajaxurl,data:{action:"jupiterx_setup_wizard_hide_notice"},beforeSend:function(){d(".jupiterx-setup-wizard-message").fadeOut(400)}})}),d("#js__regiser-api-key-btn").on("click",function(t){t.preventDefault();var e=d("#jupiterx-cp-register-api-input").val();if(0===e.length)return!1;jupiterx_modal({title:jupiterx_cp_textdomain.registering_theme,text:jupiterx_cp_textdomain.wait_for_api_key_registered,type:"",cancelButtonText:jupiterx_cp_textdomain.discard,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});var a={action:"jupiterx_cp_register_revoke_api_action",method:"register",api_key:e,security:d("#security").val()};d.post(ajaxurl,a,function(e){!0===(e=JSON.parse(e)).status?d.ajax({type:"POST",url:wp.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:["jupiterx-pro"]},success:function(t){(t.data||{}).status?(jupiterx_modal({title:jupiterx_cp_textdomain.thanks_registering,text:e.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,closeOnOutsideClick:!1,closeOnConfirm:!1,onConfirm:function(){window.location.reload()}}),d(".jupiterx-wrap").removeClass("jupiterx-call-to-register-product"),d(".get-api-key-form").addClass("d-none"),d(".remove-api-key-form").removeClass("d-none"),i()):jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:e.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val("")}})}}):jupiterx_modal({title:jupiterx_cp_textdomain.registeration_unsuccessful,text:e.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val("")}})})}),d("#js__revoke-api-key-btn").on("click",function(t){t.preventDefault(),jupiterx_modal({title:jupiterx_cp_textdomain.revoke_API_key,text:jupiterx_cp_textdomain.you_are_about_to_remove_API_key,type:"warning",showCancelButton:!0,showConfirmButton:!0,showLearnmoreButton:!1,confirmButtonText:jupiterx_cp_textdomain.ok,cancelButtonText:jupiterx_cp_textdomain.cancel,closeOnConfirm:!1,onConfirm:function(){var t={action:"jupiterx_cp_register_revoke_api_action",method:"revoke",security:d("#security").val()};d.post(ajaxurl,t,function(t){!0===(t=JSON.parse(t)).status&&window.location.reload()})}})})}d(window).on("control_panel_pane_loaded",n.call_to_register),d(document).ready(n.get_pane_on_load),i(),d(window).on("control_panel_pane_loaded",i);var l={init:function(){0!=d("#jupiterx-cp-plugins").length&&(l.getPluginsList(),d(document).on("click",".abb_plugin_activate",l.activateInit),d(document).on("click",".abb_plugin_deactivate",l.deactivateInit),d(document).on("click",".abb_plugin_install",l.installInit),d(document).on("click",".abb_plugin_delete",l.deleteInit),d(document).on("click",".abb_plugin_update",l.updateInit),d(document).on("click",".jupiterx-cp-plugins-filter > .btn",l.filtersInit))},getPluginsList:function(){d.post(ajaxurl,{action:"abb_get_plugins"},function(t){if(d("#js__jupiterx-plugins").html(""),1==t.status){t.data.hasOwnProperty("limit")&&d("#js__jupiterx-plugins").attr("data-plugins-limit",t.data.limit),d.each(t.data.plugins,function(t,e){d("#js__jupiterx-plugins").append(l.getPluginsTemplate(e))}),d(".jupiterx-cp-plugins-filter > .btn").prop("disabled","");var e="";"undefined"!=typeof localStorage&&(e=localStorage.getItem("activeFilter"),d(".jupiterx-cp-plugins-filter > .btn[data-filter="+e+"]").trigger("click")),x()}else jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})})},getPluginsTemplate:function(t){var e=this.getPluginActionBtns(t),a=1==t.active?"active":"inactive",n=1==t.update_needed&&t.installed?"yes":"no",i=t.installed?"":"jupiterx-icon-cloud";return'<div class="jupiterx-cp-plugin-item" data-filter="'+a+'" data-update="'+n+'"><div class="jupiterx-cp-plugin-item-inner jupiterx-card">'+(t.pro?'<img class="jupiterx-pro-badge" src="'+jupiterxControlPanel.proBadgeUrl+'" />':"")+'<div class="jupiterx-card-body"><figure class="jupiterx-cp-plugin-item-thumb '+i+'"><img src="'+t.img_url+'"></figure><div class="jupiterx-cp-plugin-meta-wrapper"><span class="jupiterx-cp-plugin-item-required is-active-'+t.required+'">'+jupiterx_cp_textdomain.required+'</span><span class="jupiterx-cp-plugin-item-version">v<span class="item-version-tag">'+t.version+'</span></span></div><div class="jupiterx-cp-plugin-item-meta"><div class="jupiterx-cp-plugin-item-name">'+t.name+'</div><div class="jupiterx-cp-plugin-item-desc">'+t.desc+(t.more_link?' <a href="'+t.more_link+'" target="_blank">Learn More</a>':"")+"</div></div>"+e+"</div></div></div>"},getPluginActionBtns:function(t){var e=document.body.classList.contains("multisite");if(!t.installed){if(t.pro)return this.getProBtn();var a=t.install_disabled?"disabled":"";return this.getInstallBtn(t.slug,t.name,t.basename,a)}if(t.network_active)return this.getNetworkActiveLabel();var n="";return 1==t.active?n+=this.getDeactivateBtn(t.slug,t.name,t.basename):(n+=this.getActivateBtn(t.slug,t.name,t.basename),e||(n+=this.getDeleteBtn(t.slug,t.name,t.basename))),1!=t.update_needed||e||(n+=this.getUpdateBtn(t.slug,t.name,t.basename)),n},getProBtn:function(){return'<a class="btn btn-sm btn-outline-success jupiterx-upgrade-modal-trigger" data-upgrade-link="https://themeforest.net/item/jupiter-multipurpose-responsive-theme/5177775?ref=artbees&utm_source=PluginSectionImportButton&utm_medium=AdminUpgradePopup&utm_campaign=FreeJupiterXAdminUpgradeCampaign" href="#">'+jupiterx_cp_textdomain.add+"</a>"},getNetworkActiveLabel:function(){return'<span class="btn btn-sm network-active" href="#">'+jupiterx_cp_textdomain.network_active+"</span>"},getInstallBtn:function(t,e,a,n){return'<a class="btn btn-sm btn-outline-success jupiterx-icon-plus-circle-solid abb_plugin_install '+n+'" data-basename="'+a+'" data-slug="'+t+'" href="#" data-name="'+e+'">'+jupiterx_cp_textdomain.add+"</a>"},getUpdateBtn:function(t,e,a){return'<a class="btn btn-sm btn-outline-primary jupiterx-icon-sync-alt abb_plugin_update" data-basename="'+a+'" data-slug="'+t+'" href="#" data-name="'+e+'">'+jupiterx_cp_textdomain.update+"</a>"},getDeleteBtn:function(t,e,a){return'<a class="btn btn-sm btn-outline-danger jupiterx-icon-times-circle abb_plugin_delete" data-basename="'+a+'" data-slug="'+t+'" href="#" data-name="'+e+'">'+jupiterx_cp_textdomain.delete+"</a>"},getActivateBtn:function(t,e,a){return'<a class="btn btn-sm btn-primary abb_plugin_activate" data-basename="'+a+'" data-slug="'+t+'" href="" data-name="'+e+'" data-limit="'+l.getActivationLimit(t)+'">'+jupiterx_cp_textdomain.activate+"</a>"},getDeactivateBtn:function(t,e,a){return'<a class="btn btn-sm btn-danger abb_plugin_deactivate" data-basename="'+a+'" data-slug="'+t+'" href="#" data-name="'+e+'">'+jupiterx_cp_textdomain.deactivate+"</a>"},getActivationLimit:function(t){var e=d("#js__jupiterx-plugins").data("plugins-limit").split(",");return-1<e.indexOf("num")||(-1<["layerslider","masterslider","revslider"].indexOf(t)&&-1<e.indexOf("sliders")||-1<["jet-blog","jet-elements","jet-engine","jet-menu","jet-popup","jet-smart-filters","jet-tabs","jet-tricks","jet-woo-builder"].indexOf(t)&&-1<e.indexOf("jet-plugins"))},installInit:function(t){t.preventDefault();var e=d(this),a=e.data("name");jupiterx_modal({title:jupiterx_cp_textdomain.install_plugin,text:l.language(jupiterx_cp_textdomain.you_are_about_to_install,[a]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){l.installStart(e.data("slug"))}})},installStart:function(e){var a=this,n=d('.abb_plugin_install[data-slug="'+e+'"]'),i=n.data("name"),o=n.data("basename"),t={action:"abb_install_plugin",slug:e,basename:o};jupiterx_modal({title:jupiterx_cp_textdomain.installing_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_install,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),d.post({url:ajaxurl,data:t,success:function(t){if(t.hasOwnProperty("status")){if(1==t.status)return n.replaceWith(a.getActivateBtn(e,i,o)+a.getDeleteBtn(e,i,o)),jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_installed,text:l.language(jupiterx_cp_textdomain.plugin_installed_successfully_message,[i]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1}),!0;jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}else jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){l.request_error_handling(t,e,a)}})},activateInit:function(t){t.preventDefault();var e=d(this);jupiterx_modal({title:jupiterx_cp_textdomain.activating_notice,text:l.language(jupiterx_cp_textdomain.are_you_sure_you_want_to_activate,[e.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){1==e.data("limit")?jupiterx_modal({title:jupiterx_cp_textdomain.plugin_limit_warning,text:jupiterx_cp_textdomain.plugin_limit_warning_message+'<a href="https://help.artbees.net/maintenance/why-should-i-keep-my-active-plugins-at-minimum" target="_blank" class="jupiterx-modal-learn-more jupiterx-icon-question-circle" title="'+jupiterx_cp_textdomain.learn_more+'">'+jupiterx_cp_textdomain.learn_more+"</a>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){l.activate_start(e.data("slug"))}}):l.activate_start(e.data("slug"))}})},activate_start:function(e){var a=this,n=d('.abb_plugin_activate[data-slug="'+e+'"]'),i=n.data("name"),o=n.data("basename"),t={action:"abb_activate_plugin",slug:e,basename:o};jupiterx_modal({title:jupiterx_cp_textdomain.activating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_activation,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),d.post({url:ajaxurl,data:t,success:function(t){if(t.hasOwnProperty("status")){if(1==t.status)return n.closest(".jupiterx-cp-plugin-item").attr("data-filter","active"),n.siblings(".abb_plugin_delete").remove(),n.replaceWith(a.getDeactivateBtn(e,i,o)),jupiterx_modal({title:jupiterx_cp_textdomain.all_done,text:l.language(jupiterx_cp_textdomain.item_is_successfully_activated,[i]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,onConfirm:function(){location.reload()}}),!0;jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){d("#jupiterx-cp-register-api-input").val("")}}),jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}else jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){l.request_error_handling(t,e,a)}})},deactivateInit:function(t){t.preventDefault();var e=d(this);jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:l.language(jupiterx_cp_textdomain.are_you_sure_you_want_to_deactivate,[e.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){l.deactivate_start(e.data("slug"))}})},deactivate_start:function(a){var n=this,i=d('.abb_plugin_deactivate[data-slug="'+a+'"]'),o=i.data("name"),s=i.data("basename"),r=document.body.classList.contains("multisite"),t={action:"abb_deactivate_plugin",slug:a,basename:s};jupiterx_modal({title:jupiterx_cp_textdomain.deactivating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_deactivation,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),d.post({url:ajaxurl,data:t,success:function(t){if(t.hasOwnProperty("status")){if(1==t.status){i.closest(".jupiterx-cp-plugin-item").attr("data-filter","inactive");var e=n.getActivateBtn(a,o,s);return r||(e+=n.getDeleteBtn(a,o,s)),i.replaceWith(e),jupiterx_modal({title:jupiterx_cp_textdomain.deactivating_notice,text:l.language(jupiterx_cp_textdomain.plugin_deactivate_successfully,[]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!1,onConfirm:function(){location.reload()}}),!0}}else jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){l.request_error_handling(t,e,a)}})},deleteInit:function(t){t.preventDefault();var e=d(this);jupiterx_modal({title:jupiterx_cp_textdomain.delete_plugin,text:l.language(jupiterx_cp_textdomain.you_are_about_to_delete,[e.data("name")]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){l.delete_start(e.data("slug"))}})},delete_start:function(e){var a=d('.abb_plugin_delete[data-slug="'+e+'"]'),n=(e=e,a.data("name")),i=a.data("basename");jupiterx_modal({title:jupiterx_cp_textdomain.delete_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_delete,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),wp.updates.ajax("delete-plugin",{plugin:a.data("basename"),slug:e,success:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_deleted,text:l.language(jupiterx_cp_textdomain.plugin_deleted_successfully_message,[n]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1}),a.siblings(".btn").remove(),a.replaceWith(l.getInstallBtn(e,n,i))},error:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.errorMessage,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})}})},updateInit:function(t){t.preventDefault();var e=d(this),a=e.data("name");jupiterx_modal({title:jupiterx_cp_textdomain.update_plugin,text:l.language(jupiterx_cp_textdomain.you_are_about_to_update,[a]),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.continue,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,onConfirm:function(){l.update_start(e.data("slug"))}})},update_start:function(t){var e=d('.abb_plugin_update[data-slug="'+t+'"]');jupiterx_modal({title:jupiterx_cp_textdomain.updating_plugin,text:jupiterx_cp_textdomain.wait_for_plugin_update,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0}),wp.updates.ajax("update-plugin",{plugin:e.data("basename"),slug:t,success:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.plugin_is_successfully_updated,text:l.language(jupiterx_cp_textdomain.plugin_updated_recent_version,[e.data("name")]),type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnOutsideClick:!1,onConfirm:function(){location.reload()}}),e.closest(".jupiterx-cp-plugin-item").attr("data-update","no"),e.remove()},error:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:_.last(t.debug),type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1,closeOnOutsideClick:!1})}})},filtersInit:function(){var t=d(this),e=t.data("filter");if("undefined"!=typeof localStorage&&localStorage.setItem("activeFilter",e),d(".jupiterx-cp-plugins-filter .btn").removeClass("btn-secondary").addClass("btn-outline-secondary"),t.removeClass("btn-outline-secondary").addClass("btn-secondary"),"all"!==e){if("update"===e)return d(".jupiterx-cp-plugin-item").show(),void d(".jupiterx-cp-plugin-item").not("[data-update=yes]").hide();d(".jupiterx-cp-plugin-item").show(),d(".jupiterx-cp-plugin-item").not("[data-filter="+e+"]").hide()}else d(".jupiterx-cp-plugin-item").show()},request_error_handling:function(t,e,a){console.log(t),4==t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.status,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):0==t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.error_in_network_please_check_your_connection_and_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},language:function(a,t){if(void 0!==a&&""!=a){var e=t.length;return e<1||(e==(a.match(/{param}/g)||[]).length?d.each(t,function(t,e){a=a.replace("{param}",e)}):console.log("Array len and indicator lengh is not same, Contact support with ID : (3-6H1T4I) .")),a}}};d(window).on("control_panel_pane_loaded",l.init);var p={template_pre_request:9,server_response_status:!1,install_types:["preparation","backup_db","backup_media_records","reset_db","upload","unzip","validate","plugin","theme_content","setup_pages","plugins_content","settings","menu_locations","theme_widget","restore_media_records","finalize"],template_id:null,template_name:null,import_media:!1,progress_bar_html:"",init:function(){0!=d("#jupiterx-cp-templates").length&&(p.get_installed_template(),p.get_template_list(),p.get_template_category_list(),p.template_category_dropdown(),d(window).scroll(p.throttle(p.infinite_load_templates,200)),d(document).on("click","#js__restore-template-btn",p.get_template_restore_init),d(document).on("click","#js__cp_template_uninstall",p.uninstall_template_trigger),d(document).on("change","#js__templates-category-filter",p.template_category_filter),d("#js__template-search").on("keyup",_.debounce(p.template_search,800)),d(document).on("click",".js__cp_template_install",p.template_install_init),d(document).on("click",".jupiterx-download-psd",p.download_template_psd))},download_template_psd:function(t){t.preventDefault();var e={action:"abb_get_template_psd_link",template_name:d(this).attr("data-slug")};jQuery.post(ajaxurl,e,function(t){1==t.status?top.location.href=t.data.psd_link:(console.log(t),swal("Oops...",t.message,"error"))})},get_template_list_html:function(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];"jupiterx-default-template"==t.slug||t.slug;var a=t.slug,n=t.name;if(0==e)var i="<a "+("1"===t.free_template?'class="btn btn-primary mr-2 jupiterx-cp-template-item-btn js__cp_template_install" href="#" data-title="'+n.replace(" Jupiterx","")+'" data-name="'+t.name+'" data-slug="'+t.slug+'" data-id="'+t.id+'"':'class="btn btn-primary mr-2 jupiterx-cp-template-item-btn jupiterx-upgrade-modal-trigger" href="#" data-upgrade-link="https://themeforest.net/item/jupiter-multipurpose-responsive-theme/5177775?ref=artbees&utm_source=TemplateSectionImportButton&utm_medium=AdminUpgradePopup&utm_campaign=FreeJupiterXAdminUpgradeCampaign"')+">"+jupiterx_cp_textdomain.import+'</a><a class="btn btn-outline-secondary mr-2 jupiterx-cp-template-item-btn" href="http://demos.artbees.net/jupiterx/'+a.replace("-jupiterx","")+'" target="_blank">'+jupiterx_cp_textdomain.preview+"</a>";else i='<a id="js__cp_template_uninstall" class="btn btn-outline-danger mr-2 jupiterx-cp-template-item-btn" href="#" data-title="'+n.replace(" Jupiterx","")+'" data-name="'+t.name+'" data-slug="'+t.slug+'" data-id="'+t.id+'">'+jupiterx_cp_textdomain.remove+'</a><a class="btn btn-outline-secondary mr-2 jupiterx-cp-template-item-btn" href="http://demos.artbees.net/jupiterx/'+a.replace("-jupiterx","")+'" target="_blank">'+jupiterx_cp_textdomain.preview+"</a>";return t.psd_file&&(i+='<a class="btn btn-outline-primary jupiterx-download-psd" data-name="'+t.name+'" href="#" data-slug="'+t.slug.replace("-jupiterx","")+'" data-id="'+t.id+'" title="'+jupiterx_cp_textdomain.download_psd_files+'">.PSD</a>'),'<div class="jupiterx-cp-template-item"><div class="jupiterx-cp-template-item-inner jupiterx-card">'+("1"!==t.free_template?'<img class="jupiterx-pro-badge" src="'+jupiterxControlPanel.proBadgeUrl+'" />':"")+'<figure class="jupiterx-cp-template-item-fig"><img src="'+t.img_url+'" alt="'+t.name+'"></figure><div class="jupiterx-cp-template-item-meta jupiterx-card-body"><h4 class="jupiterx-cp-template-item-name">'+n.replace(" Jupiterx","")+'</h4><div class="jupiterx-cp-template-item-buttons'+(t.psd_file?" has-psd":"")+'">'+i+"</div></div></div></div>"},get_template_list:function(){var i=Number(d(".abb-template-page-load-more").data("from"));p.server_response_status=!0;var t={action:"abb_template_lazy_load",from:i,count:p.template_pre_request};void 0!==p.template_id&&null!==p.template_id&&(t.template_category=p.template_id),void 0!==p.template_name&&null!==p.template_name&&(t.template_name=p.template_name),d(".abb-template-page-load-more").addClass("is-active"),d.post(ajaxurl,t,function(t){if(1==t.status){var e=t.data.backups,a=[],n="";e.hasOwnProperty("list_of_backups")&&(null==(a=e.list_of_backups)?console.log("List Of Backups is NULL!"):0==a.length?console.log("List Of Backups is EMPTY!"):(n=e.latest_backup_file.created_date,d("#js__restore-template-wrap").addClass("is-active"),d("#js__restore-template-btn").attr("data-content",jupiterx_cp_textdomain.template_backup_date+n))),0<t.data.templates.length&&(d(".abb-template-page-load-more").data("from",i+t.data.templates.length),d.each(t.data.templates,function(t,e){d("#js__installed-template").data("installed-template")!==e.slug&&d("#js__new-templates-list").append(p.get_template_list_html(e))}),p.server_response_status=!1),d(".abb-template-page-load-more").removeClass("is-active"),x()}else console.log(t),jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})})},get_template_category_list:function(){var n='<span class="dropdown-item" data-value="no-category">No category found</span>',i=d(".js__template-category-list-wrap");d.ajax({type:"POST",url:ajaxurl,data:{action:"abb_get_templates_categories"},dataType:"json",timeout:6e4,success:function(t){if(!0===t.hasOwnProperty("status"))if(!0===t.status){var a='<span class="dropdown-item" data-value="all-categories">All Categories</span>';d.each(t.data,function(t,e){a+='<span class="dropdown-item" data-value="'+e.id+'">'+e.name+"</span>"}),i.html(a)}else i.html(n);else i.html(n)},error:function(t,e,a){i.html(n),p.request_error_handling(t,e,a)}})},template_category_dropdown:function(){d(document).on("click",".js__template-category-list-wrap span",function(t){var e=d(this);d("#js__templates-category-filter").val(e.attr("data-value")).trigger("change"),d("#js__templates-category-filter").siblings("button").text(e.text())})},reset_template_list:function(){d("#js__new-templates-list").fadeOut(200,function(){d(this).empty().fadeIn(200)}),d(".abb-template-page-load-more").data("from",0)},template_category_filter:function(){p.reset_template_list(),p.template_id=d(this).val(),p.get_template_list()},template_search:function(t){p.reset_template_list(),p.template_name=d(this).val(),p.get_template_list()},get_installed_template:function(){var t=0<arguments.length&&void 0!==arguments[1]&&arguments[1],e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],a=d("#js__installed-template").data("installed-template-id");t&&(a=t);var n=d("#js__installed-template").data("installed-template");if(e&&(n=e),!(a.length<=0&&n.length<=0)){var i={action:"abb_template_lazy_load",from:0,count:1,template_id:a,template_name:n};d.post(ajaxurl,i,function(t){1==t.status&&0<t.data.templates.length&&d.each(t.data.templates,function(t,e){d("#js__installed-template-wrap").show(),d("#js__installed-template").attr("data-installed-template-id",e.id).attr("data-installed-template",e.slug).empty().append(p.get_template_list_html(e,!0))})})}},template_install_init:function(t){t.preventDefault();var e=d(this),a=d("#request-filesystem-credentials-dialog");a.length?p.get_fs_credential_data()?p.get_template_install_modal(e):p.get_fs_credential_modal(a,e,"install"):p.get_template_install_modal(e)},get_template_install_modal:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:jupiterx_cp_textdomain.installing_sample_data_will_delete_all_data_on_this_website+"<br> You are about to install <strong>"+t.data("title")+"</strong>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.yes_install,showCloseButton:!0,showLearnmoreButton:!1,onConfirm:function(){jupiterx_modal({title:jupiterx_cp_textdomain.include_images_and_videos,text:p.language(jupiterx_cp_textdomain.would_you_like_to_import_images_and_videos_as_preview,['<a href="https://help.artbees.net/getting-started/installing-a-template" target="_blank">Learn More</a>']),type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.do_not_include,cancelButtonText:jupiterx_cp_textdomain.include,showCloseButton:!0,showLearnmoreButton:!1,onConfirm:function(){p.import_media=!1,p.start_importing_template(t)},onCancel:function(){p.import_media=!0,p.start_importing_template(t)}})}})},start_importing_template:function(t){var e="";e+='<div class="jupiterx-modal-header">',e+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.install_sample_data+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">',e+='<ul class="jupiterx-modal-step-list">',e+='<li id="js__cp-template-install-steps-backup">'+jupiterx_cp_textdomain.backup_reset_database+' <span class="result-message"></span></li>',e+='<li id="js__cp-template-install-steps-upload">'+jupiterx_cp_textdomain.downloading_sample_package_data+' <span class="result-message"></span></li>',e+='<li id="js__cp-template-install-steps-plugin">'+jupiterx_cp_textdomain.install_required_plugins+' <span class="result-message"></span></li>',e+='<li id="js__cp-template-install-steps-install">'+jupiterx_cp_textdomain.install_sample_data+' <span class="result-message"></span></li>',e+="</ul>",e+="</div>",p.progress_bar_html=d(e),jupiterx_modal({html:p.progress_bar_html,showProgress:!0,progress:"0%",showCloseButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1}),p.install_template(0,t.data("name"),t.data("id"))},finalise_template_install:function(t,e,a){p.get_installed_template(e,a),d('a[data-slug="'+e+'"]').parents(".jupiterx-cp-template-item").hide(),jupiterx_modal({title:jupiterx_cp_textdomain.hooray,text:jupiterx_cp_textdomain.template_installed_successfully,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),r=!1,p.create_restore_button()},install_template:function(n,i,o){if(null==p.install_types[n])return p.finalise_template_install(n,i,o),!1;var t=p.get_fs_credential_data(),e={action:"abb_install_template_procedure",type:p.install_types[n],template_name:i,template_id:o,import_media:p.import_media};if(t&&(e=d.extend({},t,e)),r=1,"theme_content"==e.type&&window.EventSource&&!navigator.userAgent.match(/Edge|MSIE|Trident/)){console.log("EventSource is triggered. The event log will be streamed below in separated interval.");var a=ajaxurl+"?action=abb_install_template_sse&template_name="+i+"&fetch_attachments="+p.import_media+"&template_id="+o,s=new EventSource(a);s.onmessage=function(t){var e=JSON.parse(t.data),a="";return e.hasOwnProperty("message")&&(a=e.message),e.hasOwnProperty("error")&&e.hasOwnProperty("status")&&!e.error&&e.status?(console.log("Install Template - ",p.install_types[n]," - Fetch media : ",p.import_media," : Req data - ",i," , Response - ",e),jupiterx_modal.update({progress:Math.round(100*n/(p.install_types.length-1))+"%"}),p.show_install_template_messages(p.install_types[n],a),p.install_template(++n,i,o)):function(t){jupiterx_cp_textdomain.something_wierd_happened_please_try_again;jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}),r=!1}(a),s.close(),!0},s.onerror=function(t){console.log("EventSource take a long time, try to separate the log.")},s.addEventListener("log",function(t){console.log(t.data)})}else d.ajax({type:"POST",url:ajaxurl,data:e,dataType:"json",success:function(t){console.log("Install Template - ",p.install_types[n]," - Fetch media : ",p.import_media," : Req data - ",i," , Response - ",t),t.hasOwnProperty("status")?1==t.status?(jupiterx_modal.update({progress:Math.round(100*n/(p.install_types.length-1))+"%"}),p.show_install_template_messages(p.install_types[n],t.message),p.install_template(++n,i,o)):(console.log(e.type),jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}),r=!1):(jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}),r=!1)},error:function(t,e,a){p.request_error_handling(t,e,a),r=!1}})},uninstall_template_trigger:function(t){t.preventDefault();var e=d(this);jupiterx_modal({title:jupiterx_cp_textdomain.important_notice,text:jupiterx_cp_textdomain.uninstalling_template_will_remove_all_your_contents_and_settings,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.yes_uninstall+e.data("title"),showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){p.uninstall_template(e.data("name"))}})},uninstall_template:function(t){jupiterx_modal({title:jupiterx_cp_textdomain.uninstalling_Template,text:jupiterx_cp_textdomain.please_wait_for_few_moments,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,indefiniteProgress:!0}),r=1,d.post(ajaxurl,{action:"abb_uninstall_template"}).done(function(t){console.log("Ajax Req : ",t),d("#js__installed-template-wrap").hide(),p.reset_template_list(),p.get_template_list(),jupiterx_modal({title:jupiterx_cp_textdomain.hooray,text:jupiterx_cp_textdomain.template_uninstalled,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),r=!1}).fail(function(t){console.log("Failed msg : ",t),r=!1})},get_template_restore_init:function(){var t=d(this),e=d("#request-filesystem-credentials-dialog");e.length?p.get_fs_credential_data()?p.get_template_restore_modal(t):p.get_fs_credential_modal(e,t,"restore"):p.get_template_restore_modal(t)},get_template_restore_modal:function(t){d.ajax({type:"POST",url:ajaxurl,data:{action:"abb_is_restore_db"},dataType:"json",success:function(t){var e=t.data.latest_backup_file.created_date;jupiterx_modal({title:jupiterx_cp_textdomain.restore_settings,text:"<p>"+jupiterx_cp_textdomain.you_are_trying_to_restore_your_theme_settings_to_this_date+"<strong class='jupiterx-tooltip-restore--created-date'>"+e+"</strong>. "+jupiterx_cp_textdomain.are_you_sure+"</p>",type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.restore,showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){jupiterx_modal({title:jupiterx_cp_textdomain.restoring_database,text:jupiterx_cp_textdomain.please_wait_for_few_moments,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});var t={action:"abb_restore_latest_db"},e=p.get_fs_credential_data();e&&(t=d.extend({},e,t)),d.ajax({type:"POST",url:ajaxurl,data:t,dataType:"json",success:function(t){t.status?jupiterx_modal({title:t.message,type:"success",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,indefiniteProgress:!0,confirmButtonText:jupiterx_cp_textdomain.reload_page,onConfirm:function(){location.reload()}}):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:t.message,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},error:function(t,e,a){console.log("Fail: ",t)}})}})},error:function(t,e,a){console.log("Fail: ",t)}})},create_restore_button:function(){var t={action:"abb_is_restore_db"},e=p.get_fs_credential_data();e&&(t=d.extend({},e,t)),d.ajax({type:"POST",url:ajaxurl,data:t,dataType:"json",success:function(t){var e=t.data,a=[],n="";e.hasOwnProperty("list_of_backups")?null==(a=e.list_of_backups)?console.log("List Of Backups is NULL!"):0==a.length?console.log("List Of Backups is EMPTY!"):(n=e.latest_backup_file.created_date,d("#js__backup-date").text(n),d("#js__restore-template-wrap").addClass("is-active"),console.log("Restore Buttons Created Successfully!")):console.log("No backup files found!")},error:function(t,e,a){console.log("Fail: ",t)}})},show_install_template_messages:function(t,e){var a=d("#js__cp-template-install-steps-backup .result-message"),n=d("#js__cp-template-install-steps-upload .result-message"),i=d("#js__cp-template-install-steps-plugin .result-message"),o=d("#js__cp-template-install-steps-install .result-message");switch(t){case"backup_db":case"backup_media_records":a.text(e);break;case"reset_db":a.text(e),d("#js__cp-template-install-steps-backup").addClass("jupiterx-modal-step--done");break;case"upload":case"unzip":n.text(e);break;case"validate":n.text(e),d("#js__cp-template-install-steps-upload").addClass("jupiterx-modal-step--done");break;case"plugin":i.html(e),d("#js__cp-template-install-steps-plugin").addClass("jupiterx-modal-step--done");break;case"theme_content":case"menu_locations":case"setup_pages":case"plugins_content":case"theme_widget":case"restore_media_records":o.text(e);break;case"finalize":o.text(e),d("#js__cp-template-install-steps-install").addClass("jupiterx-modal-step--done")}},infinite_load_templates:function(){var t=d(".abb-template-page-load-more");if(t.length){var e=d(window).height();d(window).scrollTop()>t.offset().top-e&&!1===p.server_response_status&&p.get_template_list()}},throttle:function(t,e){var a,n,i,o,s,r,l=_.debounce(function(){s=o=!1},e);return function(){a=this,n=arguments;return i||(i=setTimeout(function(){i=null,s&&t.apply(a,n),l()},e)),o?s=!0:r=t.apply(a,n),l(),o=!0,r}},store_fs_credential_data:function(t){if(!t||!Array.isArray(t))return!1;for(var e=[],a=0;a<t.length;a++)t[a].name&&"action"!=t[a].name&&e.push({name:t[a].name,value:u.encode(t[a].value)});return e=JSON.stringify(e),"undefined"!=typeof Storage?(window.sessionStorage.setItem("XFTPCredentialsData",e),e):!!navigator.cookieEnabled&&(setCookie("JupiterXFTPCredentialsData",e),e)},get_fs_credential_data:function(){if("undefined"!=typeof Storage)var t=window.sessionStorage.getItem("JupiterXFTPCredentialsData");else if(navigator.cookieEnabled)t=getCookie("JupiterXFTPCredentialsData");if(void 0===t||!t)return!1;var e={};t=JSON.parse(t);for(var a=0;a<t.length;a++)t[a].name&&"action"!=t[a].name&&(e[t[a].name]=u.decode(t[a].value));return e},get_fs_credential_modal:function(t,i,o){var e="",a="jupiterx-install-template-credential",n=t.find(".request-filesystem-credentials-dialog-content").clone();n.find("#request-filesystem-credentials-title").hide(),n.find("input#password, input#username, input#hostname").addClass("jupiterx-textfield"),n.find("#upgrade").hide(),n.find(".cancel-button").hide(),n.find("form").attr("id",a).append('<input type="hidden" name="action" value="abb_check_ftp_credentials">'),e+='<div class="jupiterx-modal--warning js__ftp-creds-container">',e+='<div class="jupiterx-modal-header">',e+='<span class="jupiterx-modal-icon"></span>',e+='<h3 class="jupiterx-modal-title">'+n.find("#request-filesystem-credentials-title").text()+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">'+n.html()+"</div>",e+='<span class="jupiterx-modal-message-box"></span>',e+='<div class="jupiterx-modal-footer">',e+='<div class="jupiterx-wrap jupiterx-modal-ok-btn-wrap"><input type="button" id="js__ftp-creds-submit-btn" class="jupiterx-button jupiterx-button--blue jupiterx-button--small jupiterx-modal-ok-btn" value="'+n.find("#upgrade").val()+'"></div>',e+='<div class="jupiterx-wrap jupiterx-modal-cancel-btn-wrap"><input type="button" class="jupiterx-button jupiterx-button--gray jupiterx-button--small jupiterx-modal-cancel-btn" value="'+n.find(".cancel-button").text()+'"></div>',e+="</div>",e+="</div>";var s=jupiterx_modal({html:d(e),showCloseButton:!0,showConfirmButton:!0,closeOnOutsideClick:!1,closeOnConfirm:!1,onConfirm:function(){var n=d("#"+a).serializeArray();d.ajax(ajaxurl,{data:n,method:"POST",beforeSend:function(t,e){d(".request-credentials-form-modal .jupiterx-modal-message-box").hide()},success:function(t,e,a){t.status?(s.close(),p.store_fs_credential_data(n),"install"==o?p.get_template_install_modal(i):"restore"==o&&p.get_template_restore_modal(i)):t.message?d(".js__ftp-creds-container .jupiterx-modal-message-box").show().text(t.message):d(".js__ftp-creds-container .jupiterx-modal-message-box").show().text(jupiterx_cp_textdomain.incorrect_credentials)},error:function(t,e,a){}})}})},request_error_handling:function(t,e,a){console.log(t);var n="";jupiterx_modal({html:p.progress_bar_html,showProgress:!0,progress:"0%",showCloseButton:!1,closeOnOutsideClick:!1}),4==t.readyState?""!=t.responseText?(n+='<div class="jupiterx-modal--error">',n+='<div class="jupiterx-modal-header">',n+='<span class="jupiterx-modal-icon"></span>',n+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.whoops+"</h3>",n+="</div>",n+='<div class="jupiterx-modal-desc">'+p.language(jupiterx_cp_textdomain.dont_panic,[t.status,'<a href="https://help.artbees.net/getting-started/installing-a-template" target="_blank">Learn More</a>'])+"</div>",n+='<textarea readonly="readonly" onclick="this.focus();this.select()" class="jupiterx-modal-textarea">'+t.responseText+"</textarea>",n+="</div>",jupiterx_modal({html:d(n),showCloseButton:!0,showConfirmButton:!0,closeOnOutsideClick:!1})):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:p.language(jupiterx_cp_textdomain.dont_panic,[t.status,'<a href="https://help.artbees.net/getting-started/installing-a-template" target="_blank">Learn More</a>']),type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):0==t.readyState?jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.error_in_network_please_check_your_connection_and_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1}):jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.something_wierd_happened_please_try_again,type:"error",showCancelButton:!1,showConfirmButton:!0,showLearnmoreButton:!1})},language:function(a,t){if(void 0!==a&&""!=a){var e=t.length;return e<1||(e==(a.match(/{param}/g)||[]).length?d.each(t,function(t,e){a=a.replace("{param}",e)}):console.log("Array len and indicator lengh is not same, Contact support with ID : (3-6H1T4I) .")),a}}};d(window).on("control_panel_pane_loaded",p.init);var a={init:function(){0!=d("#jupiterx-cp-updates-downgrades").length&&(console.log("updates.theme"),d(document).on("click",".js__cp_change_theme_version",a.change_theme_version_init),d(document).on("click",".release-download",a.release_download))},release_download:function(t){t.preventDefault(),t.stopPropagation();var e=d(this),a=e.attr("status");if(void 0===a&&(a="active"),"active"===a){var n=d(this).data("release-id"),i=d(this).data("nonce");e.attr("status","deactive"),setTimeout(function(){e.attr("status","active")},9e3),jQuery.ajax({url:ajaxurl,type:"POST",data:{security:i,release_id:n,action:"jupiterx_get_theme_release_package_url"},success:function(t){var e=jQuery.parseJSON(t);console.log(e),e.success&&(top.location.href=e.download_link)},error:function(t){console.log(t),alert("An error occurred.")}})}},change_theme_version_init:function(t){t.preventDefault();var e=d(this),a=e.data("release-id"),n=e.data("release-version"),i=e.data("nonce"),o=e.siblings(".jupiterx-cp-update-feedback");jupiterx_modal({title:jupiterx_cp_textdomain.please_note,text:jupiterx_cp_textdomain.any_customisation_you_have_made_to_theme_files_will_be_lost,type:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonText:jupiterx_cp_textdomain.agree,cancelButtonText:jupiterx_cp_textdomain.discard,learnmoreTarget:"_blank",learnmoreLabel:"Read More",learnmoreButton:"https://intercom.help/artbees?q=Update+jupiter+x",showCloseButton:!0,showLearnmoreButton:!0,onConfirm:function(){o.removeClass("d-none"),e.addClass("disabled loading"),wp.ajax.send("jupiterx_modify_auto_update",{data:{security:i,release_id:a,release_version:n},success:function(t){wp.updates.ajax("update-theme",{slug:"jupiterx",success:function(t){o.removeClass("text-muted").addClass("text-success").text(jupiterx_cp_textdomain.theme_update_success),e.removeClass("disabled loading"),window.location.reload()},error:function(t){o.removeClass("text-muted").addClass("text-danger").text(jupiterx_cp_textdomain.theme_update_failed),e.removeClass("disabled loading")}})},error:function(t){o.removeClass("text-muted").addClass("text-danger").text(t),console.log(t)}})}})}};d(window).on("control_panel_pane_loaded",a.init);var m={init:function(){d(".js__cp-clist-add-item").on("click",m.add),d(".js__cp-clist-edit-item").on("click",m.edit),d(".js__cp-clist-remove-item").on("click",m.remove)},remove:function(t){t.preventDefault();var e=d(this);jupiterx_modal({title:jupiterx_cp_textdomain.remove_image_size,text:jupiterx_cp_textdomain.are_you_sure_remove_image_size,type:"warning",showCancelButton:!0,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,onConfirm:function(){e.closest(".jupiterx-img-size-item").remove(),d(window).trigger("control_panel_save_image_sizes")}})},add:function(t){var e="";e+='<div class="jupiterx-modal-header">',e+='<span class="jupiterx-modal-icon"></span>',e+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.add_image_size+"</h3>",e+="</div>",e+='<div class="jupiterx-modal-desc">',e+='<div class="form-group mb-3">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_name+"</strong></label>",e+='<input class="jupiterx-form-control" name="size_n" type="text" required />',e+="</div>",e+='<div class="form-row">',e+='<div class="form-group col-md-6">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_width+"</strong></label>",e+='<input class="jupiterx-form-control" min="100" name="size_w" step="1" type="number" required />',e+="</div>",e+='<div class="form-group col-md-6">',e+="<label><strong>"+jupiterx_cp_textdomain.image_size_height+"</strong></label>",e+='<input class="jupiterx-form-control" min="100" name="size_h" id="size_h" step="1" type="number" required />',e+="</div>",e+="</div>",e+='<div class="custom-control custom-checkbox form-group mb-3">',e+='<input type="checkbox" class="custom-control-input" id="size_c" name="size_c" checked="checked">',e+='<label class="custom-control-label" for="size_c"><strong>'+jupiterx_cp_textdomain.image_size_crop+"</strong></label>",e+="</div>",e+="</div>";var a=jupiterx_modal({modalCustomClass:"js__add-new-image-size",type:"warning",html:d(e),showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,closeOnOutsideClick:!0,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.save,cancelButtonText:jupiterx_cp_textdomain.discard,onConfirm:function(){m.apply(!1,a)}})},edit:function(t){var e=d(this),a=e.closest(".js__cp-image-size-item"),n=e.closest(".jupiterx-card-body"),i=n.find("[name=size_n]").val(),o=n.find("[name=size_w]").val(),s=n.find("[name=size_h]").val(),r=n.find("[name=size_c]").val();r="on"==r&&'checked="checked"';var l="";l+='<div class="jupiterx-modal-header">',l+='<span class="jupiterx-modal-icon"></span>',l+='<h3 class="jupiterx-modal-title">'+jupiterx_cp_textdomain.edit_image_size+"</h3>",l+="</div>",l+='<div class="jupiterx-modal-desc">',l+='<div class="form-group mb-3">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_name+"</strong></label>",l+='<input class="jupiterx-form-control" name="size_n" type="text" value="'+i+'" required />',l+="</div>",l+='<div class="form-row">',l+='<div class="form-group col-md-6">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_width+"</strong></label>",l+='<input class="jupiterx-form-control" min="100" name="size_w" step="1" type="number"  value="'+o+'" required />',l+="</div>",l+='<div class="form-group col-md-6">',l+="<label><strong>"+jupiterx_cp_textdomain.image_size_height+"</strong></label>",l+='<input class="jupiterx-form-control" min="100" name="size_h" id="size_h" step="1" type="number"  value="'+s+'" required />',l+="</div>",l+="</div>",l+='<div class="custom-control custom-checkbox form-group mb-3">',l+='<input type="checkbox" class="custom-control-input" id="size_c" name="size_c" '+r+">",l+='<label class="custom-control-label" for="size_c"><strong>'+jupiterx_cp_textdomain.image_size_crop+"</strong></label>",l+="</div>",l+="</div>";var p=jupiterx_modal({modalCustomClass:"js__add-new-image-size",type:"warning",html:d(l),showCloseButton:!0,showConfirmButton:!0,showCancelButton:!0,closeOnOutsideClick:!0,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.save,cancelButtonText:jupiterx_cp_textdomain.discard,onConfirm:function(){m.apply(a,p)}})},apply:function(t,e){var a="",n=d(".js__add-new-image-size"),i=n.find("[name=size_n]"),o=n.find("[name=size_w]"),s=n.find("[name=size_h]"),r=n.find("[name=size_n]").val(),l=n.find("[name=size_w]").val(),p=n.find("[name=size_h]").val(),u=n.find("[name=size_c]:checked").val(),c="on"==(u="on"==u?"on":"off")?"status-true":"status-false";return""==r?(i.addClass("is-invalid"),!1):(i.removeClass("is-invalid"),""==l?(o.addClass("is-invalid"),!1):(o.removeClass("is-invalid"),""==p?(s.addClass("is-invalid"),!1):(s.removeClass("is-invalid"),a+='<div class="jupiterx-img-size-item js__cp-image-size-item">',a+='<div class="jupiterx-img-size-item-inner jupiterx-card">',a+='<div class="jupiterx-card-body fetch-input-data">',a+='<div class="js__size-name mb-3"><strong>'+jupiterx_cp_textdomain.size_name+":</strong> "+r+"</div>",a+='<div class="js__size-dimension mb-3"><strong>'+jupiterx_cp_textdomain.image_size+":</strong> "+l+"px "+p+"px</div>",a+='<div class="js__size-crop mb-3"><strong>'+jupiterx_cp_textdomain.crop+':</strong><span class="status-state '+c+'"></span></div>',a+='<button type="button" class="btn btn-outline-success js__cp-clist-edit-item mr-1">'+jupiterx_cp_textdomain.edit+"</button>",a+='<button type="button" class="btn btn-outline-danger js__cp-clist-remove-item">'+jupiterx_cp_textdomain.remove+"</button>",a+='<input name="size_n" type="hidden" value="'+r+'" />',a+='<input name="size_w" type="hidden" value="'+l+'" />',a+='<input name="size_h" type="hidden" value="'+p+'" />',a+='<input name="size_c" type="hidden" value="'+u+'" />',a+="</div>",a+="</div>",0<t.length?(t.after(a),t.remove()):d(".js__jupiterx-img-size-list").append(a),m.init(),e.close(),void m.save())))},save:function(t){var e=d(".js__jupiterx-img-size-list"),a=[];e.find(".js__cp-image-size-item").each(function(){a.push(d(this).find(".fetch-input-data input").serialize())}),r=1;var n=jupiterx_modal({title:jupiterx_cp_textdomain.saving_image_size,text:jupiterx_cp_textdomain.wait_for_image_size_update,type:"",showCancelButton:!1,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0});jQuery.ajax({url:ajaxurl,type:"POST",data:{action:"jupiterx_save_image_sizes",options:a,security:d("#security").val()},success:function(t){n.close(),1!=t&&jupiterx_modal({title:jupiterx_cp_textdomain.something_went_wrong,text:jupiterx_cp_textdomain.image_sizes_could_not_be_stored,type:"error",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1}),r=!1},error:function(t){console.log(t),r=!1,jupiterx_modal({type:"error",title:jupiterx_cp_textdomain.error,text:t+" "+jupiterx_cp_textdomain.issue_persists,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.try_again,onConfirm:function(){window.location.reload()}})}})}};function o(){d(".jupiterx-button--get-system-report").click(function(){var o="";d("#jupiterx-cp-system-status thead, #jupiterx-cp-system-status tbody").each(function(){if(d(this).is("thead")){var t=d(this).find("th:eq(0)").data("export-label")||d(this).text();o=o+"\n### "+d.trim(t)+" ###\n\n"}else d("tr",d(this)).each(function(){var t=d(this).find("td:eq(0)").data("export-label")||d(this).find("td:eq(0)").text(),e=d.trim(t).replace(/(<([^>]+)>)/gi,""),a=d.trim(d(this).find("td:eq(2)").text()),n=a.split(", ");if(1<n.length){var i="";d.each(n,function(t,e){i=i+e+"\n"}),a=i}o=o+""+e+": "+a+"\n"})});try{return d("#jupiterx-textarea--get-system-report").slideDown(),d("#jupiterx-textarea--get-system-report textarea").val(o).focus().select(),!1}catch(t){console.log(t)}return!1}),d("[data-jupiterx-ajax]").each(function(){var t=d(this),e=t.data("jupiterxAjax"),a=t.find(".status-state"),n=t.find(".status-text");wp.ajax.send("jupiterx_cp_system_status",{data:{nonce:jupiterxControlPanel.nonce,type:e},success:function(t){a.html('<span class="status-invisible">True</span><span class="status-state status-true"></span>')},error:function(t){a.html('<span class="status-invisible">False</span><span class="status-state status-false"></span>'),n.html(t)}})})}d(window).on("control_panel_save_image_sizes",m.save),d(window).on("control_panel_pane_loaded",m.init);var u={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(t){var e,a,n,i,o,s,r,l="",p=0;for(t=u._utf8_encode(t);p<t.length;)i=(e=t.charCodeAt(p++))>>2,o=(3&e)<<4|(a=t.charCodeAt(p++))>>4,s=(15&a)<<2|(n=t.charCodeAt(p++))>>6,r=63&n,isNaN(a)?s=r=64:isNaN(n)&&(r=64),l=l+this._keyStr.charAt(i)+this._keyStr.charAt(o)+this._keyStr.charAt(s)+this._keyStr.charAt(r);return l},decode:function(t){var e,a,n,i,o,s,r="",l=0;for(t=t.replace(/[^A-Za-z0-9+/=]/g,"");l<t.length;)e=this._keyStr.indexOf(t.charAt(l++))<<2|(i=this._keyStr.indexOf(t.charAt(l++)))>>4,a=(15&i)<<4|(o=this._keyStr.indexOf(t.charAt(l++)))>>2,n=(3&o)<<6|(s=this._keyStr.indexOf(t.charAt(l++))),r+=String.fromCharCode(e),64!=o&&(r+=String.fromCharCode(a)),64!=s&&(r+=String.fromCharCode(n));return r=u._utf8_decode(r)},_utf8_encode:function(t){t=t.replace(/rn/g,"n");for(var e="",a=0;a<t.length;a++){var n=t.charCodeAt(a);n<128?e+=String.fromCharCode(n):(127<n&&n<2048?e+=String.fromCharCode(n>>6|192):(e+=String.fromCharCode(n>>12|224),e+=String.fromCharCode(n>>6&63|128)),e+=String.fromCharCode(63&n|128))}return e},_utf8_decode:function(t){for(var e="",a=0,n=0,i=0;a<t.length;)(n=t.charCodeAt(a))<128?(e+=String.fromCharCode(n),a++):191<n&&n<224?(i=t.charCodeAt(a+1),e+=String.fromCharCode((31&n)<<6|63&i),a+=2):(i=t.charCodeAt(a+1),c3=t.charCodeAt(a+2),e+=String.fromCharCode((15&n)<<12|(63&i)<<6|63&c3),a+=3);return e}},s={steps:[],modal:"",data:{},init:function(){d(".jupiterx-cp-export-form").on("submit",s.export),d(".jupiterx-cp-import-btn").on("click",s.import),d(".jupiterx-cp-import-upload-btn").on("click",s.upload)},export:function(t){t.preventDefault(),s.steps=[],s.modal="",s.cancel="";var e=d(this).serializeArray();s.data.filename=e[0].value,e=_.reject(e,function(t){return"filename"==t.name}),s._mapOptions(e)&&(s.modal=jupiterx_modal({type:!1,title:jupiterx_cp_textdomain.exporting+' <span class="cp-export-step">'+s.steps[1]+"</span>...",text:jupiterx_cp_textdomain.export_waiting,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!0,progress:"100%",indefiniteProgress:!0,cancelButtonText:jupiterx_cp_textdomain.discard,closeOnConfirm:!1,closeOnOutsideClick:!1,onCancel:function(){s.steps=[],s.cancel=!0,s.send("Export","Discard"),s.modal.close()}}),s.send("Export",_.first(s.steps)))},import:function(t){t.preventDefault(),s.steps=[],s.modal="",s.cancel="";var e=d(".jupiterx-cp-import-wrap .jupiterx-form-control").data("id");if(void 0===e)return!1;s.attachment_id=e,s.modal=jupiterx_modal({type:!1,title:"Import",text:jupiterx_cp_textdomain.import_select_options+'\t\t\t\t<form class="jupiterx-cp-import-form">\t\t\t\t\t<label>\t\t\t\t\t\t<input type="checkbox" name="check" value="Content" checked>'+jupiterx_cp_textdomain.site_content+'\t\t\t\t\t</label>\t\t\t\t\t<label>\t\t\t\t\t\t<input type="checkbox" name="check" value="Widgets" checked>'+jupiterx_cp_textdomain.widgets+'\t\t\t\t\t</label>\t\t\t\t\t<label>\t\t\t\t\t\t<input type="checkbox" name="check" value="Settings" checked>'+jupiterx_cp_textdomain.settings+"\t\t\t\t\t</label>\t\t\t\t</form>",showCancelButton:!1,showConfirmButton:!0,showCloseButton:!0,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.import,onConfirm:function(){var t=d(".jupiterx-cp-import-form").serializeArray();s._mapOptions(t)&&(jupiterx_modal({type:!1,title:jupiterx_cp_textdomain.importing+' <span class="cp-export-step">'+s.steps[1]+"</span>...",text:jupiterx_cp_textdomain.import_waiting,showCancelButton:!0,showConfirmButton:!1,showCloseButton:!1,showLearnmoreButton:!1,progress:"100%",showProgress:!0,indefiniteProgress:!0,cancelButtonText:jupiterx_cp_textdomain.discard,closeOnOutsideClick:!1,closeOnConfirm:!1,onCancel:function(){s.steps=[],s.cancel=!0,s.send("Import","Discard"),s.modal.close()}}),s.send("Import",_.first(s.steps)))}})},send:function(n,t){wp.ajax.send("jupiterx_cp_export_import",{data:{nonce:jupiterxControlPanel.nonce,type:n,step:t,attachment_id:s.attachment_id,data:s.data},success:function(t){s.steps=_.without(s.steps,t.step);var e=_.first(s.steps);if(s.steps.length)"Start"!=t.step&&d(".cp-export-step").text(t.step),s.send(n,e);else{if(!0===s.cancel)return;var a="Export"===n?jupiterx_cp_textdomain.download:jupiterx_cp_textdomain.close;jupiterx_modal({type:"success",title:n+" "+jupiterx_cp_textdomain.done,text:n+" "+jupiterx_cp_textdomain.successfully_finished,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:a,onConfirm:function(){"Export"===n&&(window.location.href=t.download_url),s.modal.close()}})}},error:function(t){console.log(t),jupiterx_modal({type:"error",title:jupiterx_cp_textdomain.error,text:t+" "+jupiterx_cp_textdomain.issue_persists,showCancelButton:!1,showConfirmButton:!0,showCloseButton:!1,showLearnmoreButton:!1,showProgress:!1,closeOnConfirm:!1,confirmButtonText:jupiterx_cp_textdomain.try_again,onConfirm:function(){window.location.reload(),s.modal.close()}})}})},upload:function(t){var e;t.preventDefault();var a=d(t.target).parents(".jupiterx-upload-wrap").find("input");e||(e=wp.media({title:jupiterx_cp_textdomain.select_zip_file,button:{text:jupiterx_cp_textdomain.select},multiple:!1})).on("select",function(){var t=e.state().get("selection").first().toJSON();a.attr("data-id",t.id),a.val(t.url)}),e.open()},_mapOptions:function(t){return _.map(t,function(t){return s.steps.push(t.value)}),!!s.steps.length&&(s.steps.unshift("Start"),s.steps.push("End"),!0)}};d(window).on("control_panel_pane_loaded",s.init);var c={init:function(){d(".jupiterx-cp-settings-flush").on("click",c.flush),d(".jupiterx-cp-settings-form").on("submit",c.save),x()},flush:function(t){c.send("flush")},save:function(t){t.preventDefault();var e={};d.map(d(this).serializeArray(),function(t){e[t.name]=t.value}),c.send("save",e)},send:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=d(document).find(".jupiterx-cp-settings-"+t+"-feedback"),n=a.text();a.removeClass("d-none"),wp.ajax.send("jupiterx_cp_settings",{data:{nonce:jupiterxControlPanel.nonce,type:t,fields:e},success:function(t){a.removeClass("text-muted").addClass("text-success").text(t),setTimeout(function(){a.addClass("d-none text-muted").text(n)},3e3)},error:function(t){a.removeClass("text-muted").addClass("text-danger").text(t),setTimeout(function(){a.addClass("d-none text-muted").text(n)},3e3)}})}};function x(){d(".jupiterx-pro-badge").tooltip({title:jupiterx_cp_textdomain.pro_badge_tooltip_title,trigger:"hover",container:".jupiterx-wrap",template:'<div class="tooltip jupiterx-pro-badge-tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'})}d(window).on("control_panel_pane_loaded",c.init)}(jQuery);