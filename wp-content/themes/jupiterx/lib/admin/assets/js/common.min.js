"use strict";!function(l,p){function e(){var t=l(".jupiterx-update-plugins-notice input[type=hidden]");if(t.length){var e=JSON.parse(t.val());if(e.length){var i=e.filter(function(t){return"update"===t.action}),a=e.filter(function(t){return"install"===t.action});i.length?function t(){var e=i.shift();p.updates.ajaxLocked=!1,p.updates.ajax("update-plugin",{plugin:e.basename,slug:e.slug,success:function(){i.length?t():a.length?s():n()},error:function(t){u(t.debug[t.debug.length-1])}})}():a.length&&s()}}function n(){p.updates.addAdminNotice({selector:".jupiterx-update-plugins-notice",className:"notice-success is-dismissible",message:"Plugins are successfully updated."})}function u(t){p.updates.addAdminNotice({selector:".jupiterx-update-plugins-notice",className:"notice-error is-dismissible",message:t})}function s(){l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:a.map(function(t){return t.slug})},success:function(t){(t.data||{}).status?(console.log("Success installing plugins."),n()):u("There was some error installing plugins.")}})}}window.jupiterx,window.jupiterx=jQuery.extend({},window.jupiterx,{upgrade:function(t){var a=l(p.template("jupiterx-upgrade")({url:t})),e=a.find(".jupiterx-upgrade-step"),n=a.find(".jupiterx-upgrade-api-key"),u=a.find(".jupiterx-upgrade-activate"),i=e.length,s=0;function o(){if(l(e[s]).toggleClass("active done"),i<=++s)return(t=l('        <div class="jupiterx-upgrade-footer">          <span class="jupiterx-upgrade-learn-more">            <i class="jupiterx-icon-external-link-alt"></i>            <a target="_blank" href="https://help.artbees.net/getting-started/jupiter-x-pro">Learn more about Pro features</a>          </span>          <button class="btn btn-primary">Done</button>        </div>      ')).find("button").click(function(t){t.preventDefault(),window.location=window.location.href.split("#")[0]}),void jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Jupiter X is upgraded",text:"Congrats! you have successfully upgraded to Jupiter X Pro. Now you can enjoy working with Jupiter X at its maximum potential.",footerHTML:t,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-pro"});var t;l(e[s]).addClass("active")}function r(){u.attr("disabled","disabled").append('<span class="jupiterx-spin jupiterx-icon-circle-notch"></span>'),l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"activate",api_key:n.val()},success:function(t){var e,i;(t.data||{}).status?(n.removeClass("invalid").attr("disabled","disabled"),u.attr("disabled","disabled").find(".jupiterx-icon-circle-notch").remove(),o(),e=40,i=void 0,a.find(".jupiterx-upgrade-install-progress").prepend(p.template("jupiterx-progress-bar")()),i=setInterval(function(){100<e?clearTimeout(i):(a.find(".progress-bar").css("width",e+"%"),e+=20)},3e3),l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:["jupiterx-pro"]},success:function(t){var e=t.data||{};e.status&&o()}})):(n.addClass("invalid"),u.removeAttr("disabled").find(".jupiterx-icon-circle-notch").remove())}})}a.on("click",".active .jupiterx-upgrade-buy-pro",function(){o()}),a.on("click",".active .jupiterx-upgrade-activate",function(t){t.preventDefault(),r()}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Upgrade Jupiter X",text:a,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-pro"})},activateInit:function(){var t=l(p.template("jupiterx-activate")()),i=t.find(".jupiterx-upgrade-api-key"),a=t.find(".jupiterx-upgrade-activate"),n=l('      <div class="jupiterx-upgrade-footer">        <span class="jupiterx-upgrade-learn-more">          <i class="jupiterx-icon-external-link-alt"></i>          <a target="_blank" href="https://help.artbees.net/getting-started/jupiter-x-pro">Learn more about Pro features</a>        </span>        <button class="btn btn-primary">Done</button>      </div>    ');function e(){a.attr("disabled","disabled").append('<span class="jupiterx-spin jupiterx-icon-circle-notch"></span>'),l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"activate",api_key:i.val()},success:function(t){function e(){jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Oops! Registration was unsuccessful.",text:"Your API key could not be verified. There is no such API key or it is used in another site",footerHTML:n,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-times"})}(t.data||{}).status?(i.removeClass("invalid").attr("disabled","disabled"),a.attr("disabled","disabled").find(".jupiterx-icon-circle-notch").remove(),l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:["jupiterx-pro"]},success:function(t){(t.data||{}).status?jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Jupiter X is activated",text:"Congrats! Jupiter X is activated successfully. Now you can enjoy working with Jupiter at its maximum potential.",footerHTML:n,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-check"}):e()}})):(i.addClass("invalid"),a.find(".jupiterx-icon-circle-notch").remove(),e())}})}n.find("button").click(function(t){t.preventDefault(),window.location=window.location.href.split("#")[0]}),t.on("click",".jupiterx-upgrade-activate",function(t){t.preventDefault(),e()}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Activate Jupiter X",text:t,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-key"})},installPro:function(){jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Jupiter X Pro Plugin",text:"Please go to Control Panel > Plugins and activate Jupiter X Pro plugin.",showCancelButton:!1,showConfirmButton:!0,confirmButtonText:"Install Plugin",closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-pro",onConfirm:function(){var t,e,i;t=l("<div></div>"),e=40,i=void 0,t.prepend(p.template("jupiterx-progress-bar")()),i=setInterval(function(){100<e?clearTimeout(i):(t.find(".progress-bar").css("width",e+"%"),e+=20)},3e3),l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:["jupiterx-pro"]},success:function(t){var e=t.data||{};if(e.status){var i=l('                <div class="jupiterx-upgrade-footer">                  <span class="jupiterx-upgrade-learn-more"></span>                  <button class="btn btn-primary">Done</button>                </div>              ');i.find("button").click(function(t){t.preventDefault(),window.location.reload(!0)}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"ðŸŽ‰ Jupiter X Pro plugin installed",text:"Congrats! You have successfully activated Jupiter X Pro plugin. Now you can enjoy working with Jupiter X at its maximum potential.",footerHTML:i,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1})}else jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade jupiterx-modal-upgrade-done",title:"Oops! Plugin installation was unsuccessful.",text:e.message,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-times"})}}),jupiterx_modal({modalCustomClass:"jupiterx-modal-upgrade",title:"Installing Jupiter X Pro Plugin",text:t,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-pro"})}})},updatePluginsNotce:e,updatePluginsModal:function(t){if(void 0!==t&&t.length){var u=t.filter(function(t){return"update"===t.action}),s=t.filter(function(t){return"install"===t.action}),e=l('        <div class="jupiterx-update-plugins-footer">          <span class="jupiterx-update-plugins-learn-more">            <i class="jupiterx-icon-question-circle"></i>            <a target="_blank" href="https://help.artbees.net/maintenance/updating-the-plugins/updating-bundled-plugins">Learn More</a>          </span>          <button class="btn btn-primary">Update Plugins</button>        </div>      ');e.find("button").click(function(t){t.preventDefault(),function(){var t=l("<div></div>");function i(){var t=l('            <div class="jupiterx-upgrade-footer">              <span class="jupiterx-upgrade-learn-more"></span>              <button class="btn btn-primary">Ok</button>            </div>          ');t.find("button").click(function(t){t.preventDefault(),window.location.reload(!0)}),jupiterx_modal({modalCustomClass:"jupiterx-modal-update-plugins",title:"ðŸŽ‰ Update successful",text:"You have successfully updated your plugins to latest version.",footerHTML:t,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1})}function a(t){jupiterx_modal({modalCustomClass:"jupiterx-modal-update-plugins",title:"Oops! Plugins update was unsuccessful.",text:t,showCloseButton:!1,showCancelButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-times"})}function n(){l.ajax({type:"POST",url:p.ajax.settings.url,data:{action:"jupiterx_api",type:"install_plugins",plugins:s.map(function(t){return t.slug})},success:function(t){(t.data||{}).status?(console.log("Success installing plugins."),i()):a("There was some error installing plugins.")}})}t.prepend(p.template("jupiterx-progress-bar")()).find(".progress-bar").css("width","100%"),u.length?function t(){var e=u.shift();p.updates.ajaxLocked=!1,p.updates.ajax("update-plugin",{plugin:e.basename,slug:e.slug,success:function(){u.length?t():s.length?n():i()},error:function(t){a(t.debug[t.debug.length-1])}})}():s.length&&n(),jupiterx_modal({modalCustomClass:"jupiterx-modal-update-plugins",title:"Updating plugins",text:t,showCloseButton:!1,showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-info-circle"})}()});var i=[];t.forEach(function(t){i.push('<span class="jupiterx-update-plugins-name">'+t.name+"</span>")}),jupiterx_modal({modalCustomClass:"jupiterx-modal-update-plugins",footerHTML:e,title:"Theme update failed",text:"New updates are available for these essential plugins. Jupiter X may not work properly without the latest version of these plugins. "+i.join(""),showCancelButton:!1,showConfirmButton:!1,closeOnOutsideClick:!1,type:!1,icon:"jupiterx-icon-info-circle"})}}}),l(document).on("click",".jupiterx-upgrade-modal-trigger, #jupiterx-popup-jupiterx_pro",function(t){t.preventDefault(),"undefined"!=typeof jupiterxPremium?jupiterx.activateInit():jupiterx.upgrade(t.target.getAttribute("data-upgrade-link"))}),l(document).on("click",".jupiterx-update-plugins-notice-button",function(t){t.preventDefault(),l(t.target).addClass("updating-message").text("Updating Plugins"),e()})}(jQuery,wp);